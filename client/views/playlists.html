<template name="playlists">
  <div class="container">
    <ul class="playlists">
      {{#each playlists}}
        {{> playlistEntry}}
      {{/each}}
    </ul>
    {{> insertPlaylistForm}}
  </div>
</template>

<template name="insertPlaylistForm">
  {{> quickForm collection="Playlists" id="insertPlaylistForm" type="insert"}}
</template>

<template name="playlistEntry">
  <li>
    <img height="20px" src="{{cover}}" />
    <a href="{{pathFor 'playlist'}}">{{title}}</a>
    - {{description}}
  </li>
</template>

<template name="playlist">
  <div class="container">

    <div class="row">
      <div class="col-md-4">

        <div class="edittoggle collapse-group">
          <a href="" data-toggle="collapse">edit <span class="glyphicon glyphicon-edit"></span></a>
          <div class="collapse in">

            <h1>{{title}}</h1>
            {{#if description}}
              <p class="lead">{{description}}</p>
            {{/if}}
            {{#if cover}}
              <img height="100px" src="{{cover}}" />
            {{/if}}

          </div>

          <div class="collapse">
            {{> updatePlaylistForm}}
          </div>

        </div>
      </div>

      <div class="col-md-8">
        {{> playlistTabs}}
      </div>
    </div>

  </div>
</template>

<template name="updatePlaylistForm">
  {{> quickForm collection="Playlists" doc=editingDoc id="updatePlaylistForm" type="update"}}
</template>

<template name="playlistTabs">
  <!-- Nav tabs -->
  <ul class="playlist-tabs nav nav-tabs">
    <li class="{{isActiveTab 'search'   }}" data-id="search"   ><a>Search</a></li>
    <li class="{{isActiveTab 'songs'    }}" data-id="songs"    ><a>Songs</a></li>
    <li class="{{isActiveTab 'followers'}}" data-id="followers"><a>Followers</a></li>
    <li class="{{isActiveTab 'stats'    }}" data-id="stats"    ><a>Stats</a></li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div class="tab-pane {{isActiveTab 'search'}}">

      <form class="youtube-search">
        <div class="input-group">
          <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
          <input type="text" class="form-control youtube-query" placeholder="Search">
        </div>
      </form>
      {{> searchResults}}
    </div>

    <div class="tab-pane {{isActiveTab 'songs'}}">

      <div class="col-md-10">
        {{#each songs}}
			<p><span data-action="remove" class="glyphicon glyphicon-remove"></span> <strong>{{name}}</strong> ({{duration}})</p>
		{{/each}}
      </div>
      <div class="col-md-2">
        <div class="col-md-4"><span class="glyphicon glyphicon-search"></span></div>
        <div class="col-md-4"><span class="glyphicon glyphicon-heart"></span></div>
        <div class="col-md-4"><span class="glyphicon glyphicon-remove"></span></div>
      </div>

    </div>

    <div class="tab-pane {{isActiveTab 'followers'}}">followers</div>
    <div class="tab-pane {{isActiveTab 'stats'}}">stats</div>
  </div>
</template>

<template name="searchResults">
  {{#if error}}
    <h1>{{error}}</h1>
  {{/if}}

  {{#with result}}
    <ul class="list-group">
    {{#each items}}
      {{> searchResult}}
    {{/each}}
    </ul>
  {{/with}}
</template>

<template name="searchResult">
  <li class="youtube-result list-group-item" data-id="{{id}}">
	<div class="floatleft overlay-container" style="margin-right:20px">
		<p class="duration-container">{{calcTime song.contentDetails.duration}}</p>
		<img src="{{snippet.thumbnails.default.url}}" alt="thumbnail" />
	</div>
	<div>
		<h4 class="list-group-item-heading">{{snippet.title}}</h4>
		<button type="submit" id="quickAdd" class="btn btn-primary btn-xs floatright">
			<span class="glyphicon glyphicon-plus"></span>
		</button>
		<span class="glyphicon glyphicon-thumbs-up green bold"></span> {{song.statistics.likeCount}}
		<span class="glyphicon glyphicon-thumbs-down red bold"></span> {{song.statistics.dislikeCount}}
		<a rel="external" href="http://youtu.be/{{id.videoId}}">
			<span class="glyphicon glyphicon-link"></span>
		</a>
	</div>
  </li>
</template>